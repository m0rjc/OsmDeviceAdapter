{{- if eq .Values.secretStrategy "unified" }}
{{- include "osm-device-adapter-secrets.validateValues" . }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "osm-device-adapter-secrets.unifiedSecretName" . }}
  {{- if .Values.namespace }}
  namespace: {{ .Values.namespace }}
  {{- end }}
  labels:
    {{- include "osm-device-adapter-secrets.labels" . | nindent 4 }}
    app.kubernetes.io/component: secrets
  annotations:
    helm.sh/resource-policy: keep
    description: "Unified secret for OSM Device Adapter containing all credentials"
type: Opaque
stringData:
  # OSM OAuth credentials
  osm-client-id: {{ .Values.osm.clientId | quote }}
  osm-client-secret: {{ .Values.osm.clientSecret | quote }}

  # Database connection
  database-url: {{ .Values.database.url | quote }}

  # Redis connection
  redis-url: {{ .Values.redis.url | quote }}
{{- end }}
